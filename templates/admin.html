<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin - Int√©grale Academy</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <style>
    /* Styles g√©n√©raux pour les boutons */
    .btn, .btn-valid, .btn-invalid {
      display: inline-block;
      min-width: 110px;       /* largeur homog√®ne */
      text-align: center;
      margin: 5px 3px;
      font-weight: bold;
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      text-decoration: none;
      color: white;
    }

    /* Boutons sp√©cifiques */
    .btn.download { background-color: #007bff; }   /* Bleu */
    .btn.pdf      { background-color: #6f42c1; }   /* Violet */
    .btn.save     { background-color: #218838; }   /* Vert fonc√© */
    .btn.delete   { background-color: #c82333; }   /* Rouge fonc√© */

    .btn-valid    { background-color: #28a745; }   /* Vert */
    .btn-invalid  { background-color: #dc3545; }   /* Rouge */

    /* Statuts color√©s */
    .status-badge {
      padding: 5px 10px;
      border-radius: 6px;
      font-weight: bold;
      display: inline-block;
      min-width: 110px;
      text-align: center;
    }
    .status-incomplet { background: #e0e0e0; color: #333; }
    .status-complet   { background: #ffb74d; color: #fff; }
    .status-valide    { background: #28a745; color: #fff; }
    .status-nonvalide { background: #dc3545; color: #fff; }
  </style>
</head>
<body>
  <div class="admin-header">
    <img src="/static/logo.png" alt="Logo Int√©grale Academy">
    <h1>Interface Admin - Int√©grale Academy</h1>
  </div>

  <table>
    <thead>
      <tr>
        <th>Nom</th>
        <th>Pr√©nom</th>
        <th>Email</th>
        <th>Statut</th>
        <th colspan="3">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for row in data %}
      <tr>
        <td>{{ row.nom }}</td>
        <td>{{ row.prenom }}</td>
        <td>{{ row.email }}</td>

        <!-- Affichage du statut color√© -->
        <td>
          {% if row.status == 'VALIDE' %}
            <span class="status-badge status-valide">VALIDE</span>
          {% elif row.status == 'NON_VALIDE' %}
            <span class="status-badge status-nonvalide">NON VALIDE</span>
          {% elif row.status == 'COMPLET' %}
            <span class="status-badge status-complet">COMPLET</span>
          {% else %}
            <span class="status-badge status-incomplet">INCOMPLET</span>
          {% endif %}
        </td>

        <td colspan="3">
          <form method="post" action="/update/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" class="actions">
            <select name="status">
              <option value="INCOMPLET" {% if row.status == 'INCOMPLET' %}selected{% endif %}>INCOMPLET</option>
              <option value="COMPLET" {% if row.status == 'COMPLET' %}selected{% endif %}>COMPLET</option>
              <option value="VALIDE" {% if row.status == 'VALIDE' %}selected{% endif %}>VALIDE</option>
              <option value="NON_VALIDE" {% if row.status == 'NON_VALIDE' %}selected{% endif %}>NON VALIDE</option>
            </select>

            <input type="text" name="commentaire" value="{{ row.commentaire }}" placeholder="Commentaire">
            <input type="hidden" name="folder" value="{{ row.folder }}">

            <a href="/download/{{ row.folder }}" class="btn download">üìÅ T√©l√©charger</a>
            <a href="/fiche/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" class="btn pdf">üìÑ Fiche PDF</a>
            <a href="/idpack/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" class="btn pdf">ü™™ ID PDF</a>
            <a href="/photosheet/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" class="btn pdf">üñºÔ∏è Photo DOCX</a>

            <button type="submit" class="btn save">üíæ Enregistrer</button>
          </form>

          <!-- Boutons rapides -->
          <form method="post" action="/update/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" style="display:inline;">
            <input type="hidden" name="folder" value="{{ row.folder }}">
            <input type="hidden" name="status" value="VALIDE">
            <button type="submit" class="btn-valid">‚úîÔ∏è VALIDE</button>
          </form>

          <form method="post" action="/update/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" style="display:inline;">
            <input type="hidden" name="folder" value="{{ row.folder }}">
            <input type="hidden" name="status" value="NON_VALIDE">
            <button type="submit" class="btn-invalid">‚ùå NON VALIDE</button>
          </form>

          <form method="post" action="/delete/{{ row.prenom|trim|urlencode }}/{{ row.nom|trim|urlencode }}" class="actions" style="margin-top: 10px;">
            <button type="submit" class="btn delete">üóëÔ∏è Supprimer</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
